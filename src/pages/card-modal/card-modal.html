<ion-header>
  <ion-navbar color="primary">
    <ion-buttons start>
      <button ion-button (click)="dismiss()">Cancel</button>
    </ion-buttons>
    <ion-buttons end>
      <button ion-button [disabled]="!cardForm.valid" (click)="submit()">Save</button>
    </ion-buttons>
    <ion-title>Add Card</ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="address-modal">
  <form [formGroup]="cardForm" (ngSubmit)="submit()">
    <ion-list>
      <ion-item>
        <ion-label floating>Creditcard #</ion-label>
        <ion-input type="text" formControlName="number" (change)="cardNumberChanged = true;"></ion-input>
        <ion-icon *ngIf="!cardForm.controls.number.valid  && (cardNumberChanged)" name="radio-button-on" danger item-right></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label floating>CVC</ion-label>
        <ion-input type="text" formControlName="cvc" (change)="cvcChanged = true;"></ion-input>
        <ion-icon *ngIf="!cardForm.controls.cvc.valid  && (cvcChanged)" name="radio-button-on" danger item-right></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label floating>Exp. Month (mm)</ion-label>
        <ion-input type="text" formControlName="exp_month" (change)="expMonthChanged = true;"></ion-input>
        <ion-icon *ngIf="!cardForm.controls.exp_year.valid  && (expMonthChanged && expYearChanged)" name="radio-button-on" danger item-right></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label floating>Exp. Year (yyyy)</ion-label>
        <ion-input type="text" formControlName="exp_year" (change)="expYearChanged = true;"></ion-input>
        <ion-icon *ngIf="!cardForm.controls.exp_year.valid  && (expMonthChanged && expYearChanged)" name="radio-button-on" danger item-right></ion-icon>
      </ion-item>
      <ion-item class="no_bottom_border" *ngIf="errorMessage">
        <p class="error-message">{{errorMessage}}</p>
      </ion-item>
    </ion-list>
  </form>
</ion-content>
